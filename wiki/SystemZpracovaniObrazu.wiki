#summary Popis systému zpracování obrazu a návazností mezi jednotlivými částmi
#labels Featured,Phase-Design

= Úvod =

Celý projekt se rozvíjí současně mnoha různými směry a zde je popis, jak spolu jednotlivé části souvisí.

= Souhrn =

V zakresleném [http://zpracovaniobrazu.googlecode.com/svn/trunk/doc/Schema_zpracovani.cmap schématu] můžete vidět návaznosti jednotlivých částí kódu na sebe. Tučná cesta znamená aktuálně používaný proces, cesta kurzívou je proces, kterého se snažím dosáhnout. Naopak červená spojnice či bublina znamená, že daná činnost ještě není hotová.
Celý systém pracuje v těchto krocích:
  # Zachytit obrázek z kamery
  # Naléz na tomto obrázku nasvícený bod
  # Přepočítat jeho pozici na skutečnou pozici v obraze
  # Vykreslit tento bod

Mimo tuto řadu ještě spadá kalibrace, kde se určuje, jak je zkreslený obraz webkamery.

= Popis jednotlivých částí =

== Uložit  a načíst==
Na Linuxu je využívaný skript, který pomocí mplayeru ukládá jednotlivé snímky do zadaného adresáře. Z adresáře je pak načítá Pythonovský skript kamera.py a pomocí PIL vrací načtené pole, s nímž je dále pracováno.

== Přímo načíst z kamery ==
Přímé načtení z kamery je jen v Mac OSu a využívá frameworku CocoaSequenceGrabber, s jejíž pomocí jsou zachytávány jednotlivé snímky Pomocí frameworku je načten obrázek, ten je převeden na pole a pomocí projíždění čtverečkem se hledá oblast o velikosti 5x5 pixelů, která má největší jas. Výsledně se bude hledat plocha s nějakými paramtery, které zjistím při testování. Souřadnice nalezeného bodu jsou předávány pomocí NSTask transformační funkci v main.py.

== Transformace ==
Další částí systému je transformace. Při prvním vývoji vzniklo několik druhů transformace, avšak teoreticky správná a rychlá byla pouze jedna a to poměrová od Karla, který v současné podobě pracuje na jejím zlepšení. Další z transormací jsou buď nepřesné (Petrova), či pomalé (grafická). Všechny tyto transformace se nachází v souboru main.py. Objecitve C větev implementuje to samé tím samým způsobem, akorát v Objective C.

== Vykreslení výsledku ==
K finálnímu vykreslení výsledku se opět používá PIL a Tk. vykreslovací funkce se opět nachází v souboru main.py 
V Objective C větvi se bude využívat integrovaných knihoven MacOSu, podrobnosti nevím, nemám zatím nastudováno.